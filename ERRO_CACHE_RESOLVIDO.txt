â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                              â•‘
â•‘                    âœ… ERRO DE CACHE RESOLVIDO!                             â•‘
â•‘                                                                              â•‘
â•‘   O erro "relaÃ§Ã£o 'cache' nÃ£o existe" foi corrigido com sucesso             â•‘
â•‘                                                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ğŸ”´ QUAL ERA O ERRO?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SQLSTATE[42P01]: Undefined table: 7 ERRO:  relaÃ§Ã£o "cache" nÃ£o existe
LINE 1: select * from "cache" where "key" in ($1)


ğŸ” POR QUE ACONTECEU?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

A tabela "cache" Ã© criada pelas migraÃ§Ãµes do Laravel.

Quando criamos os 3 novos bancos de dados (portal_dev, portal_staging,
portal_prod), eles estavam vazios. As tabelas sÃ³ foram criadas no banco
portal_dev.

VocÃª estava acessando portal_prod (ou staging) que ainda nÃ£o tinha as tabelas.


âœ… O QUE FOI FEITO PARA RESOLVER?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Executei as migraÃ§Ãµes para TODOS os 3 bancos:

1. âœ“ MigraÃ§Ãµes em portal_dev ......... (jÃ¡ tinha)
2. âœ“ MigraÃ§Ãµes em portal_staging .... (feito)
3. âœ“ MigraÃ§Ãµes em portal_prod ....... (feito)

Agora todos os 3 bancos tÃªm as 28 tabelas necessÃ¡rias:
  â€¢ cache
  â€¢ cache_locks
  â€¢ users
  â€¢ ordem_servico
  â€¢ cliente
  â€¢ rps
  â€¢ pagamento_parcelas
  â€¢ (+ 20 outras tabelas)


ğŸ¯ RESULTADO FINAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ portal_dev:     28 tabelas âœ“ OK
âœ“ portal_staging: 28 tabelas âœ“ OK (migraÃ§Ãµes executadas)
âœ“ portal_prod:    28 tabelas âœ“ OK (migraÃ§Ãµes executadas)


ğŸš€ PRÃ“XIMOS PASSOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Agora vocÃª pode:

1. âœ“ Usar START_DEVELOPMENT.bat normalmente
2. âœ“ Usar START_STAGING.bat normalmente
3. âœ“ Usar START_PRODUCTION.bat normalmente

NÃ£o haverÃ¡ mais erros de "relaÃ§Ã£o nÃ£o existe"!


ğŸ’¡ DICA IMPORTANTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Se em algum momento vocÃª criar um NOVO banco de dados, lembre-se de:

1. Criar o banco (CREATE DATABASE ...)
2. Alterar o .env para apontar para o novo banco
3. Executar as migraÃ§Ãµes: php artisan migrate --force

Ou use um dos scripts .bat que jÃ¡ fazem tudo automaticamente!


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

O erro foi 100% resolvido. VocÃª pode agora usar qualquer um dos 3 ambientes
sem problemas de tabelas faltantes.

Bom desenvolvimento! ğŸš€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
